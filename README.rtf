{\rtf1\ansi\ansicpg1252\cocoartf2513
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fswiss\fcharset0 Helvetica-Bold;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww16460\viewh7440\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 Notes on code and supp. documents for, \'93
\f1\b The preservation potential of terrestrial biogeographic patterns
\f0\b0 \'94 \
Authors: Darroch, Fraser and Casey.\
\

\f1\b Code:\

\f0\b0 \
N.B. to run R codes on other devices, all files in the \'91csv_files\'92 folder should be downloaded, and all filepaths (and working directories) updated. \
\
1. \'91BetaSim_code_rev\'92\
- This script first produces, maps, and quantifies changes in beta diversity of terrestrial mammals present within contiguous North America (i.e., United States, Canada and Mexico) under a range of hypothetical extinction scenarios, and then performs simulation experiments that simulate changes in beta diversity as recorded in fossil localities (both random, and selected from the Rancholabrean), and after applying a series of stepped series of taphonomic filters (\'91taphonomy\'92, \'91lagerstatten\'92, and \'91castings\'92).\
- Requires:\
a. .shp files for North America and range polygons for terrestrial mammals downloaded from the IUCN Redlist (both included in the \'91shp_files\'92 folder), \
b. a list of North American mammals (\'92N.American_mammals_lim.csv\'92 - also downloaded from the IUCN Redlist, and provided in the \'91csv_files\'92 folder).\
c. a list of Rancholabrean fossil localities (\'91Rancholabrean_trimmed.csv\'92 - provided in the \'91csv_files\'92 folder)\
d. a list of taphonomic potentials for mammal taxa (\'91Probabilities_of_preservation.csv\'92 - provided in the \'91csv_files\'92 folder)\
e. a list of mammal body masses (\'91Elton_traits1.0.csv\'92 - provided in the \'91csv_files\'92 folder)\
\
The first section of the script (lines 141-210) produces the basic range results (\'91baseline_ranges.csv\'92 - also provided in the \'91csv_files\'92 folder), while the subsequent section (lines 211-402) produces baseline beta results for the three extinction scenarios (25%, 50% and 75%) discussed in the manuscript. Central sections of the script (lines 403-1318) perform the 5 experiments (\'91random localities\'92, \'91real localities\'92, \'91taphonomy\'92, \'91lagerstatten\'92, and \'91castings\'92), and (lines 1320-1981) additional sensitivity tests. Final section of the code plots the results of these experiments (N.B. the results .csv files are also provided in \'91results\'92 folder) and produces the plots shown in the main manuscript.\
\
2. \'91DiversityRemapping_code_rev\'92\
- This script is similar to \'91BetaSim_code_rev\'92, but quantifies the strength of correlation between actual and simulated rasterized species richness maps under a range of hypothetical extinction scenarios, and after applying a series of stepped taphonomic filters (\'91taphonomy\'92, \'91lagerstatten\'92, and \'91castings\'92).\
- Requires:\
a. .shp files for North America and range polygons for terrestrial mammals downloaded from the IUCN Redlist (both included in the \'91shp_files\'92 folder), \
b. a list of North American mammals (\'92N.American_mammals_lim.csv\'92 - provided in the \'91csv_files\'92 folder).\
c. a list of Rancholabrean fossil localities (\'91Rancholabrean_trimmed.csv\'92 - provided in the \'91csv_files\'92 folder)\
d. a list of taphonomic potentials for mammal taxa (\'91Probabilities_of_preservation.csv\'92 - provided in the \'91csv_files\'92 folder)\
e. a list of mammal body masses (\'91Elton_traits1.0.csv\'92 - provided in the \'91csv_files\'92 folder)\
\
The first sections of the script (lines 144-1040) produce results .csv files (also provided in the \'91results\'92 folder), while the last section of the script (1042-1110) produce the violin plots shown in Figure 3.\
\
3. \'91ESM_code\'92\
- This script simply puts together several of the figures given in the Electronic Supplementary Material.\
a. .shp files for North America and range polygons for terrestrial mammals downloaded from the IUCN Redlist (both included in the \'91shp_files\'92 folder), \
b. a list of North American mammals (\'92N.American_mammals_lim.csv\'92 - provided in the \'91csv_files\'92 folder).\
c. a list of Rancholabrean fossil localities (\'91Rancholabrean_trimmed.csv\'92 - provided in the \'91csv_files\'92 folder)\
d. a list of taphonomic potentials for mammal taxa (\'91Probabilities_of_preservation.csv\'92 - provided in the \'91csv_files\'92 folder)\
e. a list of mammal body masses (\'91Elton_traits1.0.csv\'92 - provided in the \'91csv_files\'92 folder)\
f. results .csv files which provide measures of gamma diversity produced in each experimental scenario (produced by the \'91BetaSim_code_rev\'92 code, but also provided in the \'91results\'92 -> \'91beta\'92 folder)\
\

\f1\b .csv files:
\f0\b0 \
\
All datasets required to re-run analyses are provided in the \'91csv_files\'92 folder. Brief descriptions of these datasets are as follows:\
\
- \'91baseline_ranges.csv\'92: list of mammal species present in contiguous North America, and their measured geographic range sizes (in km2; calculated from range polygons downloaded from the IUCN Redlist). This file produced by lines 138-208 in \'91BetaSim_code_rev\'92\
- \'91Elton_traits1.0.csv\'92: Physiological, behavioral, and ecological attributes (including body mass) of North American mammal species treated in this analysis. Data taken from the EltonTraits 1.0 database (of Wilman et al., 2014)\
- \'92N.American_mammals_lim.csv\'92: list of North American mammals downloaded from the IUCN Redlist\
- \'91Probabilities of preservation.csv\'92: Probability of preservation for North American mammals scaled from 0 to 1, calculated on the basis of body mass using the equations listed in the main manuscript\
- \'91Rancholabrean_trimmed.csv\'92: PBDB download for for Rancholabrean terrestrial fossil mammals (incl. locality lat./long. data)\
\
\

\f1\b Package info
\f0\b0 :\
\
- Required packages for all analyses are listed at the top of each script; version and citation information for these packages is given below (and also in the ESM document):\
\

\f1\b maptools
\f0\b0 : Roger Bivand and Nicholas Lewin-Koh (2017). maptools: Tools for Reading and Handling Spatial Objects. R package version 0.9-2. http://CRAN.R-project.org/package=maptools\

\f1\b sp
\f0\b0 : Pebesma, E.J., R.S. Bivand, 2005. Classes and methods for spatial data in R. R News 5 (2), https://cran.r-project.org/doc/Rnews/.\

\f1\b PBSmapping
\f0\b0 : Jon T. Schnute, Nicholas Boers and Rowan Haigh (2015). PBSmapping: Mapping Fisheries Data and Spatial Analysis Tools. R package version 2.69.76. http://CRAN.R-project.org/package=PBSmapping\

\f1\b rgeos
\f0\b0 : Roger Bivand and Colin Rundel (2017). rgeos: Interface to Geometry Engine - Open Source (GEOS). R package version 0.3-23. http://CRAN.R-project.org/package=rgeos\

\f1\b spdep
\f0\b0 : Roger Bivand, Gianfranco Piras (2015). Comparing Implementations of Estimation Methods for Spatial Econometrics. Journal of Statistical Software, 63(18), 1-36. URL: http://www.jstatsoft.org/v63/i18/.\

\f1\b rgdal
\f0\b0 : Roger Bivand, Tim Keitt and Barry Rowlingson (2016). rgdal: Bindings for the Geospatial Data Abstraction Library. R package version 1.2-5.\
  http://CRAN.R-project.org/package=rgdal\

\f1\b splancs
\f0\b0 : Barry Rowlingson and Peter Diggle (2016). splancs: Spatial and Space-Time Point Pattern Analysis. R package version 2.01-39. http://CRAN.R-project.org/package=splancs\

\f1\b pastecs
\f0\b0 : Philippe Grosjean and Frederic Ibanez (2014). pastecs: Package for Analysis of Space-Time Ecological Series. R package version 1.3-18.\
  http://CRAN.R-project.org/package=pastecs\

\f1\b plotrix
\f0\b0 : Lemon, J. (2006) Plotrix: a package in the red light district of R. R-News, 6(4): 8-12.\

\f1\b raster: 
\f0\b0 Robert J. Hijmans (2016). raster: Geographic Data Analysis and Modeling. R package version 2.5-8. http://CRAN.R-project.org/package=raster
\f1\b \
geosphere
\f0\b0 : Robert J. Hijmans (2016). geosphere: Spherical Trigonometry. R package version 1.5-5. http://CRAN.R-project.org/package=geosphere\

\f1\b betapart
\f0\b0 : Andres Baselga, David Orme, Sebastien Villeger, Julien De Bortoli and Fabien Leprieur (2017). betapart: Partitioning Beta Diversity into Turnover and Nestedness Components. R package version 1.4-1. http://CRAN.R-project.org/package=betapart\

\f1\b vioplot
\f0\b0 : Daniel Adler (2005). vioplot: Violin plot. R package version 0.2. http://wsopuppenkiste.wiso.uni-goettingen.de/~dadler\
\
\
\
\
}